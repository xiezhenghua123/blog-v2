import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as c,c as l,b as n,d as s,e as t,a as p}from"./app-f97514fb.js";const i="/blog-v2/assets/1723100528718-7358d628.png",u={},r=p('<h3 id="什么是人机验证" tabindex="-1"><a class="header-anchor" href="#什么是人机验证" aria-hidden="true">#</a> 什么是人机验证？</h3><p>人机验证（CAPTCHA）是一种用于区分人类用户和自动化脚本（机器人）的技术，通常用于网站和在线服务中来防止恶意行为。常见应用场景：恶意登录、恶意注册和其他恶意操作等等。</p><h3 id="常见人机验证解决方案" tabindex="-1"><a class="header-anchor" href="#常见人机验证解决方案" aria-hidden="true">#</a> 常见人机验证解决方案</h3><h5 id="_1、cloudflare-turnstile-推荐" tabindex="-1"><a class="header-anchor" href="#_1、cloudflare-turnstile-推荐" aria-hidden="true">#</a> 1、<strong>Cloudflare Turnstile（推荐）</strong></h5><p><strong>特点</strong> ：</p><ul><li>无感知验证，用户无需进行额外操作。</li><li>免费使用，适合各种网站。</li></ul><p><strong>适用场景</strong> ：</p><ul><li>适合任何需要高用户体验的网站，尤其是门户网站、电子商务网站等。</li></ul><p><strong>优点</strong> ：</p><ul><li>提升用户体验。</li><li>提供强大的安全防护。</li></ul>',10),k=n("strong",null,"参考链接",-1),d=n("br",null,null,-1),v={href:"https://developers.cloudflare.com/turnstile/",target:"_blank",rel:"noopener noreferrer"},g=p('<h5 id="_2、google-recaptcha" tabindex="-1"><a class="header-anchor" href="#_2、google-recaptcha" aria-hidden="true">#</a> 2、<strong>Google reCAPTCHA</strong></h5><p><strong>特点</strong> ：</p><ul><li>提供多种验证方式，包括点击复选框、图片选择和无感知验证。</li><li>使用方便，支持多种编程语言和框架。</li></ul><p><strong>适用场景</strong> ：</p><ul><li>广泛用于各种类型的网站和应用程序，适合保护登录页面、注册页面、表单提交等。</li></ul><p><strong>优点</strong> ：</p><ul><li>高准确性和防护效果。</li><li>无感知模式不会影响用户体验。</li></ul>',7),m=n("strong",null,"参考链接",-1),h=n("br",null,null,-1),b={href:"https://www.google.com/recaptcha/",target:"_blank",rel:"noopener noreferrer"},f=p('<h5 id="_3、hcaptcha" tabindex="-1"><a class="header-anchor" href="#_3、hcaptcha" aria-hidden="true">#</a> 3、<strong>hCaptcha</strong></h5><p><strong>特点</strong> ：</p><ul><li>类似于Google reCAPTCHA，通过图片选择等任务来验证用户。</li><li>支持无感知验证，且具备良好的隐私保护。</li></ul><p><strong>适用场景</strong> ：</p><ul><li>网站和应用程序需要高隐私和数据保护的网站。</li></ul><p><strong>优点</strong> ：</p><ul><li>良好的隐私保护。</li><li>免费和商业版本可选。</li></ul>',7),_=n("strong",null,"参考链接",-1),w=n("br",null,null,-1),y={href:"https://www.hcaptcha.com/",target:"_blank",rel:"noopener noreferrer"},C=p('<h5 id="_4、botdetect-captcha" tabindex="-1"><a class="header-anchor" href="#_4、botdetect-captcha" aria-hidden="true">#</a> 4、<strong>BotDetect CAPTCHA</strong></h5><p><strong>特点</strong> ：</p><ul><li>提供多种验证码类型，包括文字验证码、数学验证码等。</li><li>离线工作，不依赖外部服务。</li></ul><p><strong>适用场景</strong> ：</p><ul><li>对隐私要求高且不希望依赖外部网络服务的网站和应用程序。</li></ul><p><strong>优点</strong> ：</p><ul><li>高度可定制。</li><li>离线工作，安全性高。</li></ul>',7),q=n("strong",null,"参考链接",-1),x=n("br",null,null,-1),A={href:"https://captcha.com/",target:"_blank",rel:"noopener noreferrer"},T=n("p",null,"国内版本常见有腾讯云验证码、阿里云验证码、极验（GeeTest）、网易易盾等等。",-1),P={id:"cloudflare-turnstile使用-文档",tabindex:"-1"},j=n("a",{class:"header-anchor",href:"#cloudflare-turnstile使用-文档","aria-hidden":"true"},"#",-1),B={href:"https://developers.cloudflare.com/turnstile/",target:"_blank",rel:"noopener noreferrer"},L=n("p",null,[n("strong",null,"web端使用：")],-1),E={href:"https://developers.cloudflare.com/turnstile/get-started/client-side-rendering/",target:"_blank",rel:"noopener noreferrer"},H={href:"https://developers.cloudflare.com/turnstile/get-started/server-side-validation/",target:"_blank",rel:"noopener noreferrer"},G=p(`<p><strong>APP端使用：</strong></p><p>（这里使用uniapp框架，使用webview方式）</p><p>因为Cloudflare Turnstile需要依赖于域名进行人机验证，所以需要单独将验证码页面单独部署到某一个域名</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>safeCode<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cf-code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://dev-img.dressin.com/js/uniapp.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;plusready&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        wv <span class="token operator">=</span> plus<span class="token punctuation">.</span>webview<span class="token punctuation">.</span><span class="token function">currentWebview</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;plusready&#39;</span><span class="token punctuation">,</span> wv<span class="token punctuation">.</span><span class="token function">getURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;UniAppJSBridgeReady&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        turnstile<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         turnstile<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&#39;#cf-code&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">sitekey</span><span class="token operator">:</span> <span class="token string">&#39;站点的验证码密钥&#39;</span><span class="token punctuation">,</span>
            <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;cf-code&#39;</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>yaz
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
&lt;/html
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>密钥获取位置</strong></p><figure><img src="`+i+'" alt="1723100528718" tabindex="0" loading="lazy"><figcaption>1723100528718</figcaption></figure>',6),I={href:"https://zh.uniapp.dcloud.io/component/web-view.html#web-view",target:"_blank",rel:"noopener noreferrer"},S=p(`<p>js封装代码</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 创建webview验证码, 仅在APP-PLUS环境下有效</span>

<span class="token keyword">const</span> htmlPath <span class="token operator">=</span> <span class="token string">&#39;http://dev-img.dressin.com/html/safeCode.html&#39;</span>  <span class="token comment">//这里写部署的html地址</span>

<span class="token keyword">class</span> <span class="token class-name">CreateTurnstile</span> <span class="token punctuation">{</span>
 <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">uniScope</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$scope <span class="token operator">=</span> uniScope
  <span class="token keyword">this</span><span class="token punctuation">.</span>wv <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>

 <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> wv <span class="token operator">=</span> plus<span class="token punctuation">.</span>webview<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">&#39;transparent&#39;</span><span class="token punctuation">,</span>
   <span class="token literal-property property">popGesture</span><span class="token operator">:</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">,</span>
   <span class="token literal-property property">scrollIndicator</span><span class="token operator">:</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">,</span>
   <span class="token literal-property property">scrollBounce</span><span class="token operator">:</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">,</span>
   <span class="token literal-property property">bounce</span><span class="token operator">:</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">,</span>
   <span class="token literal-property property">bounceBackground</span><span class="token operator">:</span> <span class="token string">&#39;#ffffff&#39;</span><span class="token punctuation">,</span>
   <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token string">&#39;0px&#39;</span><span class="token punctuation">,</span>
   <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token string">&#39;0px&#39;</span><span class="token punctuation">,</span>
   <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token string">&#39;0px&#39;</span><span class="token punctuation">,</span>
   <span class="token literal-property property">right</span><span class="token operator">:</span> <span class="token string">&#39;0px&#39;</span><span class="token punctuation">,</span>
   <span class="token comment">// zindex: 9999</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">//具体样式可以自己调整</span>
  wv<span class="token punctuation">.</span><span class="token function">loadURL</span><span class="token punctuation">(</span>htmlPath<span class="token punctuation">)</span>
  <span class="token keyword">const</span> currentWebview <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$scope<span class="token punctuation">.</span><span class="token function">$getAppWebview</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  currentWebview<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>wv<span class="token punctuation">)</span>
  <span class="token keyword">return</span> wv
 <span class="token punctuation">}</span>

 <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>wv<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>wv<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>wv<span class="token punctuation">.</span><span class="token function">removeFromParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>wv<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>wv <span class="token operator">=</span> <span class="token keyword">null</span>
 <span class="token punctuation">}</span>
 <span class="token function">createId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">safeCode_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> CreateTurnstile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2);function U(V,z){const a=o("ExternalLinkIcon");return c(),l("div",null,[r,n("p",null,[k,s(" ："),d,n("a",v,[s("Cloudflare Turnstile"),t(a)])]),g,n("p",null,[m,s(" ："),h,n("a",b,[s("Google reCAPTCHA"),t(a)])]),f,n("p",null,[_,s(" ："),w,n("a",y,[s("hCaptcha"),t(a)])]),C,n("p",null,[q,s(" ："),x,n("a",A,[s("BotDetect CAPTCHA"),t(a)])]),T,n("h3",P,[j,s(" Cloudflare Turnstile使用（"),n("a",B,[s("文档"),t(a)]),s("）")]),L,n("p",null,[n("a",E,[s("客户端"),t(a)]),s("（在线api.js不能用script动态引入，否则无法识别） 、"),n("a",H,[s("服务端"),t(a)])]),G,n("p",null,[n("a",I,[s("uniapp webview文档"),t(a)])]),S])}const W=e(u,[["render",U],["__file","human-machine-verification.html.vue"]]);export{W as default};
